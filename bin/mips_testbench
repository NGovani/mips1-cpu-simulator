#!/bin/bash

SIM=$1
OUTFILE="test/output/out.csv"
echo "" > $OUTFILE

#testing for JR - should exit with code 0
TEST_ID="jr1"
INSTRUCTION="jr"
AUTHOR="oll16"
MESSAGE="Jumping back to null"
$SIM tbench_src/test_bins/jr1.bin
EC=$?
if [ $EC -eq 0 ]
then
    STATUS="Pass"
else
    STATUS="Fail"
fi
echo -e $TEST_ID",\t"$INSTRUCTION",\t"$STATUS",\t"$AUTHOR",\t"$MESSAGE >> $OUTFILE

#testing for ADDI - should exit with code 10
TEST_ID="addi1"
INSTRUCTION="addi"
AUTHOR="oll16"
MESSAGE="Adding 10 into reg 2"
$SIM tbench_src/test_bins/addi1.bin
EC=$?
if [ $EC -eq 10 ]
then
    STATUS="Pass"
else
    STATUS="Fail"
fi
echo -e $TEST_ID",\t"$INSTRUCTION",\t"$STATUS",\t"$AUTHOR",\t"$MESSAGE >> $OUTFILE

#testing for ADDI - should exit with code 20
TEST_ID="addi2"
INSTRUCTION="addi"
AUTHOR="oll16"
MESSAGE="Adding 10 into reg 2 then adding 10 again"
$SIM tbench_src/test_bins/addi2.bin
EC=$?
if [ $EC -eq 20 ]
then
    STATUS="Pass"
else
    STATUS="Fail"
fi
echo -e $TEST_ID",\t"$INSTRUCTION",\t"$STATUS",\t"$AUTHOR",\t"$MESSAGE >> $OUTFILE